<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Load connect from CDN -->
    <script src="https://unpkg.com/uport-connect/dist/uport-connect.js"></script>
  </head>
  <body>
    <div id="msg">
      Give the module a second to load...
    </div>
    <script type="text/javascript">
     //////////////////////////////
     //  Configure connect object
     /////////////////////////////

     const Connect = window.uportconnect
     const uport = new Connect('NEC IDENTITY BLOCKCHAIN')
     //Ask the user for their address information
     //by using default disclosure behavior.
    uport.requestDisclosure({ requested: ['name', 'avatar', 'country', 'phone', 'email'],
                          notifications: false })

     uport.onResponse('disclosureReq').then(res => {
       const did = res.payload.did
       json = JSON.stringify(res.payload)
       console.log(json)
       document.querySelector('#msg').innerHTML = "Congratulations you are now <b>logged in</b>`.  Here is your DID identifier:  " + json
     })
    
    </script>
  </body>
</html>
